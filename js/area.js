const margin={top:24,right:24,bottom:24,left:24};let width=0,height=0;const chart=d3.select(".chart-lluvia"),svg=chart.select("svg"),scales={};let dataz;function setupScales(){const t=d3.scaleTime().domain([1951,2017]),a=d3.scaleLinear().domain([0,60]);scales.count={x:t,y:a}}function setupElements(){const t=svg.select(".container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","area-container")}function updateScales(t,a){scales.count.x.range([0,t]),scales.count.y.range([a,0])}function drawAxes(t){const a=d3.axisBottom(scales.count.x).tickFormat(d3.format("d")).ticks(13);t.select(".axis-x").attr("transform","translate(0,"+height+")").call(a);const e=d3.axisLeft(scales.count.y).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-width);t.select(".axis-y").call(e)}function updateChart(t){const a=chart.node().offsetWidth;width=a-margin.left-margin.right,height=600-margin.top-margin.bottom,svg.attr("width",a).attr("height",600);const e="translate("+margin.left+","+margin.top+")",s=svg.select(".container");s.attr("transform",e);const n=d3.area().x(t=>scales.count.x(t.fecha)).y0(height).y1(t=>scales.count.y(t.dias)).curve(d3.curveCardinal.tension(.6));updateScales(width,height);const c=chart.select(".area-container").selectAll(".area").data([t]),i=c.enter().append("path").attr("class","area");c.merge(i).transition().duration(600).ease(d3.easeLinear).attr("d",n),drawAxes(s)}function resize(){updateChart(dataz)}function loadData(){d3.csv("csv/dias-de-lluvia.csv",function(t,a){t?console.log(t):((dataz=a).forEach(t=>{t.fecha=t.fecha,t.dias_lluvia=t.dias}),setupElements(),setupScales(),updateChart(dataz))})}window.addEventListener("resize",resize),loadData();