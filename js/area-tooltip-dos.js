function areaTooltip(){const t={top:24,right:24,bottom:24,left:24};let a=0,e=0;const o=d3.select(".chart-lluvia-tooltip-dos"),s=o.select("svg"),n={};let c;const l=d3.bisector(t=>t.fecha).left,i=o.append("div").attr("class","tooltip tooltip-lluvias").style("opacity",0);function r(r){const d=o.node().offsetWidth;a=d-t.left-t.right,e=600-t.top-t.bottom,s.attr("width",d).attr("height",600);const p="translate("+t.left+","+t.top+")",u=s.select(".chart-lluvia-tooltip-dos-container");u.attr("transform",p);const f=d3.area().x(t=>n.count.x(t.fecha)).y0(e).y1(t=>n.count.y(t.dias)).curve(d3.curveCardinal.tension(.6));!function(t,a){n.count.x.range([0,t]),n.count.y.range([a,0])}(a,e);const h=o.select(".area-container-dos").selectAll(".area").data([c]),x=h.enter().append("path").attr("class","area");h.merge(x).attr("d",f),function(s){const r=d3.axisBottom(n.count.x).tickFormat(d3.format("d")).ticks(13);s.select(".axis-x").attr("transform","translate(0,"+e+")").call(r);const d=d3.axisLeft(n.count.y).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-a);s.select(".axis-y").call(d);const p=s.select(".focus"),u=s.select(".overlay"),f=s.select("text-focus");p.select(".x-hover-line").attr("y2",e),f.attr("x",-10).attr("y",-20).attr("dy",".31em"),u.attr("width",a+t.left+t.right).attr("height",e).on("mouseover",function(){p.style("display",null)}).on("mouseout",function(){p.style("display","none"),i.style("opacity",0)}).on("mousemove",function(){const t=o.node().offsetWidth;var a=n.count.x.invert(d3.mouse(this)[0]),e=l(c,a,1),s=c[e-1],r=c[e],d=a-s.fecha>r.fecha-a?r:s;const u=n.count.x(d.fecha)+25,f=u+300,h=t-u;i.style("opacity",1).html('<p class="tooltipYear"><span class="textYear">'+d.fecha+"</span>En <span>"+d.dias+"</span> días de lluvia se recogieron <span>"+d.precipitacion_anual+"</span> milímetros de agua.<p/>").style("left",f>t?"auto":u+"px").style("right",f>t?h+"px":"auto"),p.select(".x-hover-line").attr("transform","translate("+n.count.x(d.fecha)+",0)")})}(u)}window.addEventListener("resize",function(){r()}),d3.csv("csv/dias-de-lluvia.csv",function(t,a){t?console.log(t):((c=a).forEach(t=>{t.fecha=t.fecha,t.dias_lluvia=t.dias}),function(){const t=s.select(".chart-lluvia-tooltip-dos-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","area-container-dos"),t.append("rect").attr("class","overlay"),t.append("g").attr("class","focus").style("display","none").append("line").attr("class","x-hover-line hover-line").attr("y1",0),t.select(".focus").append("text").attr("class","text-focus")}(),function(){const t=d3.scaleTime().domain([d3.min(c,t=>t.fecha),d3.max(c,t=>t.fecha)]),a=d3.scaleLinear().domain([0,60]);n.count={x:t,y:a}}(),r())})}areaTooltip();