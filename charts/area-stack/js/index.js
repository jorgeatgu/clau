import wesPalette from"./../../../../src/js/color.js";wesPalette();const areaStack=()=>{const t=24,a=24,e=24,s=48;let c=0,n=0;const r=d3.select(".area-stack"),o=r.select("svg"),i={};let d;const l=d=>{const l=r.node().offsetWidth;c=l-s-a,n=600-t-e,o.attr("width",l).attr("height",600);const k="translate("+s+","+t+")",x=o.select(".area-stack-container");x.attr("transform",k);const m=d.columns.slice(1),y=d3.area().x((t,a)=>i.count.x(t.data.year)).y0(t=>i.count.y(t[0])).y1(t=>i.count.y(t[1])).curve(d3.curveCardinal.tension(.6)),u=d3.stack().keys(m).order(d3.stackOrderInsideOut)(d),f=d3.scaleOrdinal().domain(m).range(["#375b8b","#3295e9","#625ad0","#bfd6fa","#49cbca"]);((t,a)=>{i.count.x.range([0,t]),i.count.y.range([a,0])})(c,n);const g=r.select(".area-stack-container-bis").selectAll(".area").data(u),p=g.enter().append("path").attr("class","area");g.merge(p).transition().duration(600).ease(d3.easeLinear).style("fill",t=>f(t.key)).attr("d",y),(t=>{const a=d3.axisBottom(i.count.x).tickFormat(d3.format("d")).ticks(5);t.select(".axis-x").attr("transform","translate(0,"+n+")").call(a);const e=d3.axisLeft(i.count.y).tickFormat(d3.format("d")).tickSizeInner(-c).ticks(5);t.select(".axis-y").call(e)})(x)};window.addEventListener("resize",()=>{l(d)}),d3.csv("csv/accidentes.csv",(t,a)=>{t?console.log(t):(d=a,(()=>{const t=o.select(".area-stack-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","area-stack-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(d,t=>t.year)),a=d3.scaleLinear().domain([0,2e3]);i.count={x:t,y:a}})(),l(d))})};areaStack();