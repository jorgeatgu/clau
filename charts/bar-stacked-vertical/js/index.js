const barStackedVertical=()=>{const t=24,a=24,e=24,c=48;let n=0,s=0,r=0,i=0;const o=d3.select(".bar-stack"),l=o.select("svg"),d={};let m;const x=d3.scaleOrdinal().range(["#2A7D97","#DB455E"]),k=()=>{const t=d3.scaleBand().domain(m.map(t=>t.fecha)).paddingInner(.3),a=d3.scaleLinear().domain([0,d3.max(m,t=>t.max+35)]);d.count={x:t,y:a}},u=m=>{r=o.node().offsetWidth,n=r-c-a,s=(i=600)-t-e,l.attr("width",r).attr("height",i);const k="translate("+c+","+t+")",u=l.select(".bar-stack-container");u.attr("transform",k),((t,a)=>{d.count.x.rangeRound([0,t]),d.count.y.range([a,0])})(n,s);const g=o.select(".bar-stack-container-bis"),f=m.columns.slice(1,3);x.domain(f);const b=d3.stack().keys(f)(m),h=g.selectAll(".serie-vertical").data(b).enter().append("g").attr("class","serie-vertical").attr("fill",t=>x(t.key)).selectAll(".bar-vertical").data(function(t){return t}),p=h.enter().append("rect").attr("class","bar-vertical");h.merge(p).attr("x",t=>d.count.x(t.data.fecha)).attr("y",t=>d.count.y(t[1])).attr("height",t=>d.count.y(t[0])-d.count.y(t[1])).attr("width",d.count.x.bandwidth()),(t=>{const a=d3.axisBottom(d.count.x).ticks(5).tickFormat(d3.format("d"));t.select(".axis-x").attr("transform","translate(0,"+s+")").call(a);const e=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).tickPadding(10).ticks(5).tickSizeInner(-n);t.select(".axis-y").call(e)})(u)};function g(t,a,e){let c;for(a=1,c=0;a<e.length;++a)c+=t[e[a]]=+t[e[a]];return t.total=c,t}window.addEventListener("resize",()=>{k(),u(m)}),d3.csv("csv/maximas-minimas.csv",g,(t,a)=>{t?console.log(t):((m=a).forEach(t=>{t.min=t.minimas,t.max=t.maximas}),(()=>{const t=l.select(".bar-stack-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","bar-stack-container-bis")})(),k(),u(m))})};barStackedVertical();